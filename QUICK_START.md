# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000)

## –®–∞–≥ 2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:**

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Supabase CLI

```bash
supabase db push
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –í—Ä—É—á–Ω—É—é (Supabase Dashboard)

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. SQL Editor ‚Üí New query
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `supabase/migrations/init_database.sql`
5. –í—Å—Ç–∞–≤—å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ (Run)

---

## –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ü—Ä–æ—Ñ–∏–ª–∏ **—Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞).

–ù–æ –µ—Å–ª–∏ –≤—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å **–î–û** –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞, —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –≤—Ä—É—á–Ω—É—é:

```sql
INSERT INTO user_profiles (id, level, xp, streak)
VALUES (
  '721f041b-68c6-427f-818f-be835b342ef2',  -- –í–∞—à USER_ID
  1,      -- level
  0,      -- xp
  0       -- streak
);
```

**–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –ø—Ä–æ—Ñ–∏–ª—è:**

```sql
INSERT INTO user_profiles (id, level, xp, streak)
SELECT id, 1, 0, 0
FROM auth.users
WHERE id NOT IN (SELECT id FROM user_profiles);
```

**–ö–∞–∫ –Ω–∞–π—Ç–∏ USER_ID?**
1. Supabase Dashboard ‚Üí Authentication
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ UUID (—Å—Ç–æ–ª–±–µ—Ü "User ID")

---

## –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```sql
-- –î–æ–±–∞–≤–∏—Ç—å —ç–ø–æ—Ö—É
INSERT INTO eras (title, description, order_index)
VALUES ('–î—Ä–µ–≤–Ω–∏–π –º–∏—Ä', '–ò—Å—Ç–æ—Ä–∏—è –¥—Ä–µ–≤–Ω–∏—Ö —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–π', 1);

-- –î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–∫ (–∑–∞–º–µ–Ω–∏—Ç–µ era_id –Ω–∞ ID –≤–∞—à–µ–π —ç–ø–æ—Ö–∏)
INSERT INTO lessons (title, content, era_id, order_index)
VALUES (
  '–î—Ä–µ–≤–Ω–∏–π –ï–≥–∏–ø–µ—Ç',
  '–î—Ä–µ–≤–Ω–∏–π –ï–≥–∏–ø–µ—Ç –±—ã–ª –æ–¥–Ω–æ–π –∏–∑ –≤–µ–ª–∏—á–∞–π—à–∏—Ö —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–π –¥—Ä–µ–≤–Ω–µ–≥–æ –º–∏—Ä–∞...',
  'era_id_–∑–¥–µ—Å—å',
  1
);

-- –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å (–∑–∞–º–µ–Ω–∏—Ç–µ lesson_id –Ω–∞ ID –≤–∞—à–µ–≥–æ —É—Ä–æ–∫–∞)
INSERT INTO questions (lesson_id, question_text, options, correct_answer, order_index)
VALUES (
  'lesson_id_–∑–¥–µ—Å—å',
  '–ö—Ç–æ –±—ã–ª —Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–º –í–µ–ª–∏–∫–æ–π –ü–∏—Ä–∞–º–∏–¥—ã?',
  ARRAY['–•–∞—Ñ—Ä', '–•—É—Ñ—É', '–ú–µ–Ω–∫–∞—É—Ä', '–î–∂–æ—Å–µ—Ä'],
  1,  -- –•—É—Ñ—É (–∏–Ω–¥–µ–∫—Å 1)
  1
);

-- –î–æ–±–∞–≤–∏—Ç—å –±–∏—Ç–≤—É –Ω–∞ –∫–∞—Ä—Ç—É
INSERT INTO historical_battles (title, description, year, latitude, longitude)
VALUES (
  '–ë–∏—Ç–≤–∞ –ø—Ä–∏ –ú–∞—Ä–∞—Ñ–æ–Ω–µ',
  '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –±–∏—Ç–≤–∞ –º–µ–∂–¥—É –≥—Ä–µ–∫–∞–º–∏ –∏ –ø–µ—Ä—Å–∞–º–∏ –≤ 490 –≥–æ–¥—É –¥–æ –Ω.—ç.',
  490,
  38.1405,  -- —à–∏—Ä–æ—Ç–∞
  24.0298   -- –¥–æ–ª–≥–æ—Ç–∞
);

-- –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
INSERT INTO achievements (title, description, icon, xp_reward)
VALUES (
  '–ü–µ—Ä–≤—ã–π —à–∞–≥',
  '–ü—Ä–æ–π—Ç–∏ –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫',
  'üéì',
  10
);
```

---

## –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚úÖ

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [http://localhost:3000](http://localhost:3000)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å (email/–ø–∞—Ä–æ–ª—å)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/dashboard`
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ "–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è" ‚Üí —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å (—Å–º –≤—ã—à–µ)
   - –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç–ø–æ—Ö–∏ ‚Üí –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–π—Ç–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—É
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ XP –¥–æ–±–∞–≤–∏–ª—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è" –ø—Ä–∏ –≤—Ö–æ–¥–µ –Ω–∞ –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç

**–†–µ—à–µ–Ω–∏–µ**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å:
```sql
INSERT INTO user_profiles (id, level, xp, streak)
VALUES ('–≤–∞—à_user_id', 1, 0, 0);
```

### –û—à–∏–±–∫–∞ "–¢–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

**–†–µ—à–µ–Ω–∏–µ**: –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é (—Å–º –≤—ã—à–µ)

### –û—à–∏–±–∫–∞ "406 PGRST116"

**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –£–±–µ–¥–∏—Ç–µ—Å—å:
- –¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞
- –ü—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–µ—Ç RLS –ø—Ä–∏—á–∏–¥–æ–∫ (–æ—Ç–∫–ª—é—á–µ–Ω—ã)

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–§–∞–π–ª `.env.local`:

```env
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxxxxxx
ADMIN_EMAIL=–≤–∞—à–∞–ª–ø–æ—á—Ç–∞@example.com
```

–ü–æ–ª—É—á–∏—Ç—å –∏–∑ [Supabase Dashboard](https://supabase.com/dashboard) ‚Üí Project Settings ‚Üí API

---

## üìö –î–∞–ª—å—à–µ

- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: —Å–º–æ—Ç—Ä–∏—Ç–µ [README.md](./README.md)
- Setup Supabase: [SUPABASE_SETUP.md](./SUPABASE_SETUP.md)
